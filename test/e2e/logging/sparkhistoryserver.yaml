apiVersion: spark.kubedoop.dev/v1alpha1
kind: SparkHistoryServer
metadata:
  name: sparkhistory
spec:
  image:
    # productVersion: (env('PRODUCT_VERSION'))
    productVersion: 3.5.5-kubedoop0.3.0
  clusterConfig:
    listenerClass: cluster-internal
    logFileDirectory:
      s3:
        prefix: events
        bucket:
          reference: spark-history
    vectorAggregatorConfigMapName: vector-aggregator-discovery

  node:
    roleGroups:
      default:
        replicas: 1
        config:
          resources:
            cpu:
              min: 500m
              max: 2000m
            memory:
              limit: 4Gi
          logging:
            enableVectorAgent: true
